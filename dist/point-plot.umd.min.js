!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).pointPlot=n()}(this,function(){"use strict";var v=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")};function t(t,n){return t(n={exports:{}},n.exports),n.exports}var w=t(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),m=t(function(t){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)}),g=(m.version,function(i,o,t){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(i),void 0===o)return i;switch(t){case 1:return function(t){return i.call(o,t)};case 2:return function(t,n){return i.call(o,t,n)};case 3:return function(t,n,e){return i.call(o,t,n,e)}}return function(){return i.apply(o,arguments)}}),o=function(t){return"object"==typeof t?null!==t:"function"==typeof t},i=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t},n=function(t){try{return!!t()}catch(t){return!0}},e=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),r=w.document,c=o(r)&&o(r.createElement),a=!e&&!n(function(){return 7!=Object.defineProperty(function(t){return c?r.createElement(t):{}}("div"),"a",{get:function(){return 7}}).a}),u=Object.defineProperty,s={f:e?Object.defineProperty:function(t,n,e){if(i(t),n=function(t,n){if(!o(t))return t;var e,i;if(n&&"function"==typeof(e=t.toString)&&!o(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!o(i=e.call(t)))return i;if(!n&&"function"==typeof(e=t.toString)&&!o(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(n,!0),i(e),a)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},x=e?function(t,n,e){return s.f(t,n,function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}(1,e))}:function(t,n,e){return t[n]=e,t},b={}.hasOwnProperty,k="prototype",P=function(t,n,e){var i,o,r,c,a,u=t&P.F,s=t&P.G,f=t&P.S,d=t&P.P,h=t&P.B,l=t&P.W,v=s?m:m[n]||(m[n]={}),p=v[k],y=s?w:f?w[n]:(w[n]||{})[k];for(i in s&&(e=n),e)(o=!u&&y&&void 0!==y[i])&&(c=v,a=i,b.call(c,a))||(r=o?y[i]:e[i],v[i]=s&&"function"!=typeof y[i]?e[i]:h&&o?g(r,w):l&&y[i]==r?function(i){var t=function(t,n,e){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(t);case 2:return new i(t,n)}return new i(t,n,e)}return i.apply(this,arguments)};return t[k]=i[k],t}(r):d&&"function"==typeof r?g(Function.call,r):r,d&&((v.virtual||(v.virtual={}))[i]=r,t&P.R&&p&&!p[i]&&x(p,i,r)))};P.F=1,P.G=2,P.S=4,P.P=8,P.B=16,P.W=32,P.U=64,P.R=128;var f=P;f(f.S+f.F*!e,"Object",{defineProperty:s.f});var d=m.Object,h=function(t,n,e){return d.defineProperty(t,n,e)};function l(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),h(t,i.key,i)}}var p=function(t,n,e){return n&&l(t.prototype,n),e&&l(t,e),t},y=/Android|webOS|iPhone|iPod|BlackBerry/i.test(window.navigator.userAgent),M=function(t,n,e,i){var o=i.left,r=i.right,c=i.top,a=i.bottom;return t<o-e||r+e<t||n<c-e||a+e<n},_=function(t,n,e){var i=n.x,o=n.y,r=n.r;t.fillStyle="rgba("+e+", 0.8)",t.beginPath(),t.arc(i,o,r,0,2*Math.PI),t.fill(),t.closePath()},O=function(){function f(t){var n=t.ctx,e=t.rect,i=t.color,o=t.r,r=t.d,c=t.tx,a=void 0===c?"":c,u=t.ty,s=void 0===u?"":u;v(this,f),this.ctx=n,this.rect=e,this.r=o,this.color=i,this.d=r,this.dot={},this.init(a,s)}return p(f,[{key:"init",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";this.dot=function(t){var n=t.rect,e=t.r,i=t.x,o=void 0===i?"":i,r=t.y,c=void 0===r?"":r,a=n.width,u=n.height;return{x:o||Math.random()*a,y:c||Math.random()*u,sx:2*Math.random()-1,sy:2*Math.random()-1,r:Math.random()*e}}({rect:this.rect,r:this.r,x:t,y:n}),_(this.ctx,this.dot,this.color)}},{key:"update",value:function(t){var n=this.dot,e=n.x,i=n.y,o=(n.r,e+n.sx),r=i+n.sy;M(o,r,this.d,this.rect)?t&&t():(this.dot.x=o,this.dot.y=r,_(this.ctx,this.dot,this.color))}}]),f}(),S=function(){function l(t){var n=t.canvas,e=t.color,i=t.r,o=t.distance,r=t.isConnect,c=t.isOnClick,a=t.isOnMove;v(this,l);var u=n.getBoundingClientRect(),s=u.width,f=u.height;this.ctx=n.getContext("2d");var d=function(t){var n=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/n}(this.ctx);n.width=s*d,n.height=f*d,this.rect=u,this.dots_count=Math.floor(s*f/(100*o)),this.dots_distance=o,this.dots_arr=[],this.color=e,this.r=i,this.ctx.scale(d,d),this.ctx.translate(1/d,1/d);for(var h=0;h<Math.floor(this.dots_count);h++)this.initDot();this.anim(r),c&&this.onClick(),a&&this.onMove()}return p(l,[{key:"initDot",value:function(t,n){var e=new O({ctx:this.ctx,rect:this.rect,d:this.dots_distance,color:this.color,r:this.r,tx:t,ty:n});this.dots_arr.push(e)}},{key:"anim",value:function(f){var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,h=this,t=this.rect,n=t.width,e=t.height,l=this.dots_distance,v=n+l,p=e+l;return function t(){h.ctx.clearRect(-l,-l,v,p);for(var n=h.dots_arr,e=0;e<n.length;e++)if(n[e].update(function(){n.length>h.dots_count?n.splice(e,1):n[e].init()}),f)for(var i=e+1;i<n.length;i++){var o=n[e].dot.x,r=n[e].dot.y,c=n[i].dot.x,a=n[i].dot.y,u=Math.sqrt(Math.pow(o-c,2)+Math.pow(r-a,2));if(u<l){var s=h.ctx;s.beginPath(),s.moveTo(o,r),s.lineTo(c,a),s.strokeStyle="rgba("+h.color+","+(l-u)/l+")",s.strokeWidth=1,s.stroke(),s.closePath()}}d(t)}()}},{key:"onClick",value:function(){var o=this,t=y?"touchstart":"click";document.addEventListener(t,function(t){var n=y?t.touches[0]:t,e=n.pageX,i=n.pageY;M(e,i,o.dots_distance,o.rect)||o.initDot(e,i)})}},{key:"onMove",value:function(){var o=this,t=y?"touchstart":"mousedown",n=y?"touchmove":"mousemove",e=y?"touchend":"mouseup",i=function(t){var n=y?t.touches[0]:t,e=n.pageX,i=n.pageY;M(e,i,o.dots_distance,o.rect)||o.dots_arr[0].init(e,i)};document.addEventListener(t,function(){document.addEventListener(n,i)}),document.addEventListener(e,function(){document.removeEventListener(n,i)})}}]),l}();return function(t){var n=t.canvas,e=t.color,i=void 0===e?"255, 255, 255":e,o=t.r,r=void 0===o?4:o,c=t.distance,a=void 0===c?100:c,u=t.isConnect,s=void 0!==u&&u,f=t.isOnClick,d=void 0===f||f,h=t.isOnMove;return new S({canvas:n,color:i,r:r,distance:a,isConnect:s,isOnClick:d,isOnMove:void 0===h||h})}});
